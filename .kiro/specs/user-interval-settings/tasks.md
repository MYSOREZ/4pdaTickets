# Implementation Plan

- [ ] 1. Создать класс UserPreferences для управления пользовательскими предпочтениями
  - Реализовать методы для проверки, нужно ли показывать предупреждение
  - Добавить методы для сохранения выбора пользователя
  - Создать метод для сброса всех предупреждений
  - _Requirements: 1.3, 2.2, 3.2_

- [ ] 2. Создать IntervalWarningDialog для показа предупреждений
  - Создать диалог с информацией о рисках коротких интервалов
  - Добавить кнопки "Использовать как есть" и "Использовать безопасный интервал"
  - Реализовать callback для обработки выбора пользователя
  - _Requirements: 2.1, 2.2_

- [ ] 3. Модифицировать ExactAlarmScheduler для поддержки пользовательских интервалов
  - Убрать принудительное ограничение минимального интервала в 60 секунд
  - Добавить проверку пользовательских предпочтений перед показом предупреждения
  - Реализовать логику обработки коротких интервалов с учетом выбора пользователя
  - _Requirements: 1.1, 1.2, 1.3_

- [ ] 4. Добавить опцию сброса предупреждений в SettingsActivity
  - Создать новую настройку "Сбросить предупреждения об интервалах"
  - Добавить обработчик для сброса сохраненных предпочтений
  - Показать подтверждение после успешного сброса
  - _Requirements: 3.1, 3.3_

- [ ] 5. Обновить все места вызова ExactAlarmScheduler
  - Проверить все вызовы scheduleNextAlarmSeconds в коде
  - Убедиться, что новая логика работает корректно во всех сценариях
  - Добавить обработку случаев, когда диалог не может быть показан
  - _Requirements: 1.1, 1.2_

- [ ] 6. Добавить логирование и обработку ошибок
  - Логировать выбор пользователя для отладки
  - Добавить fallback на безопасный интервал при ошибках
  - Обработать случаи отсутствия UI контекста для диалога
  - _Requirements: 1.2, 1.3_

- [ ] 7. Создать unit тесты для новой функциональности
  - Тесты для UserPreferences (сохранение/загрузка предпочтений)
  - Тесты для ExactAlarmScheduler (обработка коротких интервалов)
  - Тесты для IntervalWarningDialog (создание сообщений)
  - _Requirements: 1.1, 2.1, 3.2_

- [ ] 8. Протестировать интеграцию с существующим кодом
  - Проверить работу с MainActivity при запуске мониторинга
  - Убедиться в корректности работы с ExactAlarmReceiver
  - Протестировать сценарии с различными интервалами (10с, 30с, 60с, 300с)
  - _Requirements: 1.1, 1.2, 1.3_