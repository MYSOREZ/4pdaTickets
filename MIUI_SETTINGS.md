# Инструкция по настройке MIUI для стабильной работы мониторинга

Для предотвращения усыпления приложения системой MIUI необходимо выполнить следующие настройки:

## 1. Отключение оптимизации батареи

1. Откройте **Настройки** → **Приложения** → **Управление приложениями**
2. Найдите **4PDA Tickets Monitor**
3. Нажмите на приложение
4. Выберите **Контроль активности** → **Нет ограничений**

## 2. Разрешение автозапуска

1. **Настройки** → **Приложения** → **Разрешения** → **Автозапуск**
2. Найдите **4PDA Tickets Monitor** и включите переключатель

## 3. Закрепление в памяти

1. Откройте приложение **4PDA Tickets Monitor**
2. Нажмите кнопку **Обзор** (квадрат) для просмотра недавних приложений
3. Найдите **4PDA Tickets Monitor** и нажмите на иконку замка над превью приложения
4. Приложение будет закреплено в памяти

## 4. Дополнительные настройки безопасности

1. **Настройки** → **Безопасность** → **Ускорение системы**
2. Нажмите на шестеренку в правом верхнем углу
3. **Заблокированные приложения** → добавьте **4PDA Tickets Monitor**

## 5. Настройки для разработчиков (опционально)

1. **Настройки** → **О телефоне** → нажмите 7 раз на **Версия MIUI**
2. **Настройки** → **Расширенные настройки** → **Для разработчиков**
3. Найдите **Ограничение фоновых процессов** → выберите **Стандартное ограничение** или **Без ограничений**
4. Отключите **Принудительно закрывать операции**

## 6. Отключение MIUI оптимизации (для продвинутых пользователей)

1. Включите **Режим разработчика** (см. пункт 5)
2. В настройках для разработчиков найдите **Отключить MIUI оптимизацию**
3. Включите эту опцию и перезагрузите устройство

⚠️ **Важно**: После отключения MIUI оптимизации некоторые системные функции могут работать иначе.

## Проверка работы

После выполнения всех настроек:

1. Запустите мониторинг в приложении
2. Сверните приложение
3. Подождите 30-60 минут
4. Проверьте, продолжает ли работать мониторинг

Если мониторинг остановился, повторите настройки и убедитесь, что все пункты выполнены правильно.

## Дополнительные механизмы защиты в приложении

Приложение использует несколько механизмов для предотвращения усыпления:

- **Foreground Service** - основной сервис с уведомлением
- **WorkManager** - периодическая проверка каждые 15 минут
- **AlarmManager** - пробуждение каждые 30 минут
- **WakeLock** - удержание процессора активным при критических операциях

Эти механизмы работают автоматически и не требуют дополнительной настройки.
